(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-522dd9a4"],{"25bb":function(t,e,a){},"454f":function(t,e,a){a("46a7");var s=a("584a").Object;t.exports=function(t,e,a){return s.defineProperty(t,e,a)}},"456d":function(t,e,a){var s=a("4bf8"),r=a("0d58");a("5eda")("keys",function(){return function(t){return r(s(t))}})},"46a7":function(t,e,a){var s=a("63b6");s(s.S+s.F*!a("8e60"),"Object",{defineProperty:a("d9f6").f})},5895:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("nav",{attrs:{"aria-label":"breadcrumb"}},[a("ol",{staticClass:"breadcrumb"},[a("li",{staticClass:"breadcrumb-item"},[a("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.onClickHome(e)}}},[t._v("Home")])]),a("li",{staticClass:"breadcrumb-item active",attrs:{"aria-current":"page"}},[t._v("Bag")])])]),a("div",{staticClass:"container my-5"},[a("ul",{staticClass:"d-flex justify-content-center step-panel mb-5"},[a("li",{staticClass:"step-panel__step1",class:{active:1==t.step}},[a("span",{staticClass:"step-panel__num"},[t._v("1")]),a("span",{staticClass:"step-panel__item"},[t._v("確認購物清單")])]),a("li",{staticClass:"step-panel__step2",class:{active:2==t.step}},[a("span",{staticClass:"step-panel__num"},[t._v("2")]),a("span",{staticClass:"step-panel__item"},[t._v("填寫訂購資料")])]),a("li",{staticClass:"step-panel__step3",class:{active:3==t.step}},[a("span",{staticClass:"step-panel__num"},[t._v("3")]),0==t.order.is_paid?a("span",{staticClass:"step-panel__item"},[t._v("金流付款")]):a("span",{staticClass:"step-panel__item"},[t._v("完成訂購")])])]),1==t.step?a("div",{staticClass:"row justify-content-center"},[a("div",{staticClass:"col-md-10"},[a("div",{staticClass:"table-responsive nowrap"},[a("table",{staticClass:"table bag-table table-hover"},[t._m(0),a("tbody",t._l(t.carts.carts,function(e){return a("tr",{key:e.id},[a("td",[a("div",{staticClass:"d-flex"},[a("img",{staticClass:"img-fluid",attrs:{src:e.product.imageUrl}}),a("div",{staticClass:"info ml-2 ml-sm-3"},[a("p",{staticClass:"mb-1"},[t._v(t._s(e.product.title))]),a("p",[t._v("尺寸："+t._s(e.size))]),e.coupon?a("p",{staticClass:"text-tan mt-1",staticStyle:{"font-size":"8px"}},[a("i",{staticClass:"fas fa-check"}),t._v("  "+t._s(e.coupon.title))]):t._e()])])]),a("td",{staticClass:"text-center"},[a("p",[t._v(t._s(e.qty))])]),a("td",{staticClass:"text-right d-none d-sm-table-cell"},[e.coupon?a("div",[a("del",{staticClass:"text-muted"},[t._v(t._s(t._f("currency")(e.total)))]),a("div",{staticClass:"text-darktheme mt-2"},[t._v("\n                      "+t._s(t._f("currency")(e.final_total))+"\n                    ")])]):a("div",[t._v("\n                    "+t._s(t._f("currency")(e.total))+"\n                  ")])]),a("td",{staticClass:"text-right",class:{"text-darktheme":e.coupon}},[t._v(t._s(t._f("currency")(e.final_total)))]),a("td",{staticClass:"text-center"},[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.delCarts(e.id)}}},[a("i",{staticClass:"far fa-trash-alt"})])])])}),0)])]),a("div",{staticClass:"d-flex justify-content-sm-between flex-column flex-sm-row align-items-center align-items-sm-start cart-bill border-top pt-5 px-sm-3"},[a("div",{staticClass:"w-md-50 cart-coupon"},[a("div",{staticClass:"input-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.couponCode,expression:"couponCode"}],staticClass:"form-control",attrs:{type:"text",placeholder:"優惠券代碼"},domProps:{value:t.couponCode},on:{input:function(e){e.target.composing||(t.couponCode=e.target.value)}}}),a("div",{staticClass:"input-group-append-set"},[a("button",{staticClass:"btn btn-darktheme px-4",attrs:{type:"button"},on:{click:function(e){return t.addCouponCode()}}},[t._v("確認")])])]),t.carts.total!==t.carts.final_total?a("p",{staticClass:"mt-3 text-tan",staticStyle:{"font-size":"8px"}},[a("i",{staticClass:"fas fa-check-double"}),t._v("  已套用優惠券")]):t._e()]),a("ul",{staticClass:"cart-bill-detail mt-3 mt-sm-0"},[a("li",{staticClass:"d-flex justify-content-between pt-0"},[a("span",[t._v("總金額")]),a("span",[t._v(t._s(t._f("currency")(t.carts.total)))])]),t.carts.total!==t.carts.final_total?a("li",{staticClass:"d-flex justify-content-between"},[a("span",[t._v("折價券")]),a("span",{staticClass:"text-tan"},[t._v(" - "+t._s(t._f("currency")(t.carts.total-t.carts.final_total)))])]):t._e(),a("li",{staticClass:"d-flex justify-content-between"},[a("span",[t._v("運費")]),t.carts.final_total<500?a("span",[t._v("$120")]):a("span",{staticClass:"text-tan"},[t._v("Free")])]),t.carts.final_total>500?a("li",{staticClass:"text-tan text-right pt-0",staticStyle:{"font-size":"8px"}},[a("i",{staticClass:"fas fa-check-double"}),t._v(" 滿 $500 免運費")]):t._e(),a("li",{staticClass:"d-flex justify-content-between pt-3 mt-3 border-top"},[a("span",[t._v("應付金額")]),a("span",{class:{"text-darktheme":t.carts.total!==t.carts.final_total}},[t._v(t._s(t._f("currency")(t.finalMoney)))])])])]),a("div",{staticClass:"d-flex justify-content-end stepBtn mt-3"},[a("button",{staticClass:"btn btn-outline-darktheme mt-5",on:{click:function(e){t.step=2}}},[t._v("下一步"),a("i",{staticClass:"fas fa-hand-point-right pl-2"})])])])]):t._e(),2==t.step?a("div",[a("div",{staticClass:"row justify-content-center mt-4"},[a("div",{staticClass:"col-11 col-sm-10 col-lg-8"},[a("h5",{staticClass:"text-content text-center mb-3 bg-light py-3"},[t._v("訂購人資訊")]),a("form",{on:{submit:function(e){return e.preventDefault(),t.createOrder(e)}}},[a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-sm-6"},[a("label",{attrs:{for:"inputName"}},[t._v("收件人姓名")]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.formData.user.name,expression:"formData.user.name"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("name")},attrs:{type:"text",name:"name",id:"inputName",placeholder:"姓名",required:""},domProps:{value:t.formData.user.name},on:{input:function(e){e.target.composing||t.$set(t.formData.user,"name",e.target.value)}}}),t.errors.has("name")?a("span",{staticClass:"text-danger"},[t._v("姓名欄位不得留空")]):t._e()]),a("div",{staticClass:"form-group col-sm-6"},[a("label",{attrs:{for:"inputTel"}},[t._v("收件人手機")]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.formData.user.tel,expression:"formData.user.tel"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("tel")},attrs:{type:"tel",name:"tel",id:"inputTel",placeholder:"手機號碼",required:""},domProps:{value:t.formData.user.tel},on:{input:function(e){e.target.composing||t.$set(t.formData.user,"tel",e.target.value)}}}),t.errors.has("tel")?a("span",{staticClass:"text-danger"},[t._v("電話欄位不得留空")]):t._e()])]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"email"}},[t._v("Email")]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"},{name:"model",rawName:"v-model",value:t.formData.user.email,expression:"formData.user.email"}],staticClass:"form-control",class:{"is-invalid":t.errors.first("email")},attrs:{type:"email",name:"email",id:"email",placeholder:"Email",required:""},domProps:{value:t.formData.user.email},on:{input:function(e){e.target.composing||t.$set(t.formData.user,"email",e.target.value)}}}),t.errors.first("email")?a("span",{staticClass:"text-danger"},[t._v("\n                "+t._s(t.errors.first("email"))+"\n              ")]):t._e()]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"address"}},[t._v("收件人地址")]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.formData.user.address,expression:"formData.user.address"}],staticClass:"form-control",class:{"is-invalid":t.errors.first("address")},attrs:{type:"text",name:"address",id:"address",placeholder:"地址",required:""},domProps:{value:t.formData.user.address},on:{input:function(e){e.target.composing||t.$set(t.formData.user,"address",e.target.value)}}}),t.errors.first("address")?a("span",{staticClass:"text-danger"},[t._v("地址欄位不得留空")]):t._e()]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"message"}},[t._v("留言")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.formData.user.message,expression:"formData.user.message"}],staticClass:"form-control",attrs:{name:"message",id:"message",cols:"10",rows:"3"},domProps:{value:t.formData.user.message},on:{input:function(e){e.target.composing||t.$set(t.formData.user,"message",e.target.value)}}})]),a("div",{staticClass:"d-flex justify-content-between mt-3"},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:function(e){t.step=1}}},[a("i",{staticClass:"fas fa-hand-point-left pr-2"}),t._v("上一步")]),t._m(1)])])])])]):t._e(),3==t.step?a("div",[a("div",{staticClass:"row justify-content-center"},[a("div",{staticClass:"col-md-10"},[a("div",{staticClass:"table-responsive nowrap"},[a("table",{staticClass:"table bag-table table-hover"},[t._m(2),a("tbody",[t._l(t.order.products,function(e){return a("tr",{key:e.id},[a("td",[a("div",{staticClass:"d-flex"},[a("img",{staticClass:"img-fluid",attrs:{src:e.product.imageUrl}}),a("div",{staticClass:"info ml-2 ml-sm-3"},[a("p",{staticClass:"mb-1"},[t._v(t._s(e.product.title))]),a("p",[t._v("尺寸："+t._s(e.size))]),e.coupon?a("p",{staticClass:"text-tan mt-1",staticStyle:{"font-size":"8px"}},[a("i",{staticClass:"fas fa-check"}),t._v("  "+t._s(e.coupon.title))]):t._e()])])]),a("td",{staticClass:"text-center"},[a("p",[t._v(t._s(e.qty))])]),a("td",{staticClass:"text-right d-none d-sm-table-cell"},[e.coupon?a("div",[a("del",{staticClass:"text-muted"},[t._v(t._s(t._f("currency")(e.total)))]),a("div",{staticClass:"text-darktheme mt-2"},[t._v("\n                        "+t._s(t._f("currency")(e.final_total))+"\n                      ")])]):a("div",[t._v("\n                      "+t._s(t._f("currency")(e.total))+"\n                    ")])]),a("td",{staticClass:"text-right",class:{"text-darktheme":e.coupon}},[t._v(t._s(t._f("currency")(e.final_total)))])])}),a("tr",{staticClass:"border-top text-darktheme"},[a("td",{staticClass:"text-right d-none d-sm-table-cell"}),a("td",{staticClass:"text-right",attrs:{colspan:"2"}},[t._v("應付金額"),t.order.total<500?a("span",[t._v("(含運費)")]):t._e()]),a("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(t.orderFinalMoney)))])])],2)])])])]),a("div",{staticClass:"row justify-content-center mt-4"},[a("div",{staticClass:"col-md-10 col-lg-6"},[a("table",{staticClass:"table table-borderless order-table mb-3"},[a("tr",[a("th",{attrs:{width:"200"}},[t._v("收件人姓名")]),a("td",[t._v(t._s(t.order.user.name))])]),a("tr",[a("th",[t._v("收件人電話")]),a("td",[t._v(t._s(t.order.user.tel))])]),a("tr",[a("th",[t._v("收件人Email")]),a("td",[t._v(t._s(t.order.user.email))])]),a("tr",[a("th",[t._v("收件人地址")]),a("td",[t._v(t._s(t.order.user.address))])]),t.order.user.message?a("tr",[a("th",[t._v("留言")]),a("td",[t._v(t._s(t.order.user.message))])]):t._e(),a("tr",[a("th",[t._v("付款狀態")]),t.order.is_paid?a("td",{staticClass:"text-darksalmon"},[t._v("付款成功"),a("i",{staticClass:"fas fa-check-circle pl-2"})]):a("td",[t._v("尚未付款")])])]),a("div",{staticClass:"text-center mt-4"},[t.order.is_paid?a("button",{staticClass:"btn btn-outline-darktheme",on:{click:t.onClickHome}},[t._v("Home"),a("i",{staticClass:"fas fa-home pl-2"})]):a("button",{staticClass:"btn btn-outline-darktheme",on:{click:t.payOrder}},[t._v("確認付款"),a("i",{staticClass:"fas fa-credit-card pl-2"})])])])])]):t._e()])])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{width:"400"}},[t._v("商品資訊")]),a("th",{staticClass:"text-center cell-right",attrs:{width:"100"}},[t._v("數量")]),a("th",{staticClass:"text-center d-none d-sm-table-cell",attrs:{width:"100"}},[t._v("價格")]),a("th",{staticClass:"text-center",attrs:{width:"100"}},[t._v("小計")]),a("th",{staticClass:"text-center",attrs:{width:"100"}},[t._v("刪除")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"btn btn-outline-darktheme",attrs:{type:"submit"}},[t._v("建立訂單"),a("i",{staticClass:"fas fa-hand-point-right pl-2"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{width:"400"}},[t._v("商品資訊")]),a("th",{staticClass:"text-center cell-right",attrs:{width:"100"}},[t._v("數量")]),a("th",{staticClass:"text-center d-none d-sm-table-cell",attrs:{width:"100"}},[t._v("價格")]),a("th",{staticClass:"text-center",attrs:{width:"100"}},[t._v("小計")])])])}],i=(a("8e6e"),a("ac6a"),a("456d"),a("c5f6"),a("bd86")),n=(a("1157"),a("2f62"));function o(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,s)}return a}function c(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?o(a,!0).forEach(function(e){Object(i["a"])(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):o(a).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var l={data:function(){return{couponCode:"",step:1,formData:{user:{name:"",email:"",tel:"",address:""},message:""},orderId:"",order:{user:{email:"",name:"",tel:"",address:""}},isPay:!1}},methods:c({delCarts:function(t){var e=this;this.$store.dispatch("cartModules/delCarts",t),setTimeout(function(){e.cartsLen<=1&&(e.$router.push({path:"/"}),e.$store.dispatch("alertMessageModules/updateMessage",{message:"購物車已清空，請繼續購物",status:"warning"}))},1e3)},addCouponCode:function(){var t="".concat("https://vue-course-api.hexschool.io","/api/").concat("ginny","/coupon"),e=this,a={code:e.couponCode};""==e.couponCode?e.$store.dispatch("alertMessageModules/updateMessage",{message:"請輸入優惠券代碼",status:"danger"}):this.$http.post(t,{data:a}).then(function(t){t.data.success?e.getCart():e.$store.dispatch("alertMessageModules/updateMessage",{message:t.data.message,status:"danger"})})},createOrder:function(){var t=this,e=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("ginny","/order"),s=e.formData;e.$validator.validate().then(function(r){r?t.$http.post(a,{data:s}).then(function(t){t.data.success?(e.orderId=t.data.orderId,e.getOrder(),e.step=3):e.$store.dispatch("alertMessageModules/updateMessage",{message:t.data.message,status:"danger"})}):e.$store.dispatch("alertMessageModules/updateMessage",{message:"欄位不完整",status:"danger"})})},getOrder:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("ginny","/order/").concat(t.orderId);t.$store.dispatch("updateLoading",!0),this.$http.get(e).then(function(e){t.order=e.data.order,t.$store.dispatch("cartModules/getCart"),t.$store.dispatch("updateLoading",!1)})},payOrder:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("ginny","/pay/").concat(t.orderId);t.$store.dispatch("updateLoading",!0),this.$http.post(e).then(function(e){e.data.success?(t.$store.dispatch("alertMessageModules/updateMessage",{message:e.data.message,status:"success"}),t.$store.dispatch("updateLoading",!1),t.getOrder()):t.$store.dispatch("alertMessageModules/updateMessage",{message:e.data.message,status:"danger"})})},onClickHome:function(){var t=this;t.$router.push({path:"/"}).catch(function(t){}),t.$store.dispatch("updateNowPage","home")}},Object(n["b"])("cartModules",["getCart"])),computed:c({finalMoney:function(){return this.carts.final_total<500?Number(this.carts.final_total)+120:this.carts.final_total},orderFinalMoney:function(){if(this.order.total)return this.order.total<500?Number(this.order.total)+120:this.order.total}},Object(n["c"])("cartModules",["carts","cartsLen"])),created:function(){this.$store.dispatch("cartModules/getCart"),this.$store.dispatch("updateNowPage","checkout")}},d=l,u=(a("a89c"),a("2877")),p=Object(u["a"])(d,s,r,!1,null,null,null);e["default"]=p.exports},"5eda":function(t,e,a){var s=a("5ca1"),r=a("8378"),i=a("79e5");t.exports=function(t,e){var a=(r.Object||{})[t]||Object[t],n={};n[t]=e(a),s(s.S+s.F*i(function(){a(1)}),"Object",n)}},"85f2":function(t,e,a){t.exports=a("454f")},"8e6e":function(t,e,a){var s=a("5ca1"),r=a("990b"),i=a("6821"),n=a("11e9"),o=a("f1ae");s(s.S,"Object",{getOwnPropertyDescriptors:function(t){var e,a,s=i(t),c=n.f,l=r(s),d={},u=0;while(l.length>u)a=c(s,e=l[u++]),void 0!==a&&o(d,e,a);return d}})},"990b":function(t,e,a){var s=a("9093"),r=a("2621"),i=a("cb7c"),n=a("7726").Reflect;t.exports=n&&n.ownKeys||function(t){var e=s.f(i(t)),a=r.f;return a?e.concat(a(t)):e}},a89c:function(t,e,a){"use strict";var s=a("25bb"),r=a.n(s);r.a},bd86:function(t,e,a){"use strict";a.d(e,"a",function(){return i});var s=a("85f2"),r=a.n(s);function i(t,e,a){return e in t?r()(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}},f1ae:function(t,e,a){"use strict";var s=a("86cc"),r=a("4630");t.exports=function(t,e,a){e in t?s.f(t,e,r(0,a)):t[e]=a}}}]);
//# sourceMappingURL=chunk-522dd9a4.8fb5e77f.js.map